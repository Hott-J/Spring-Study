### :smile: ìˆœí™˜ ì°¸ì¡°

#### :book: ìˆœí™˜ ì°¸ì¡°ë€?
* Bean Aë„ Bean Bë¥¼ ì°¸ì¡°í•˜ê³ , Bean Bë„ Bean Aë¥¼ ì°¸ì¡°í•˜ëŠ” ê²½ìš°ì— ë°œìƒ
* Bean Bê°€ ìƒì„±ë˜ì§€ ì•Šì•˜ëŠ”ë° Bean Aê°€ Bean Bë¥¼ ì°¸ì¡°í•´ ë²„ë¦¬ë©´ ë¬¸ì œ ë°œìƒ
* ë”°ë¼ì„œ ìˆœí™˜ ì°¸ì¡°ê°€ ë°œìƒí•˜ë©´ ìŠ¤í”„ë§ì€ Bean A, B ë‘˜ì¤‘ ì–´ëŠ ê²ƒì„ ë¨¼ì € ìƒì„±í•´ì•¼ í•˜ëŠ”ì§€ ê²°ì •í•˜ì§€ ëª»í•˜ê³ , ê²°êµ­ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.

#### :book: ìˆœí™˜ ì°¸ì¡° í•´ê²° ë°©ë²•
* @Lazy ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©
  ```java
  @Component
  public class A {
      private final B b;

      @Autowired
      public A(@Lazy B b) {
          this.b = b;
      }
  }
  ```
  ```java
  @Component
  public class B {
      private final A a;

      @Autowired
      public B(A a) {
          this.a = a;
      }
  }
  ```
  * @Lazy ë°©ì‹ì€ Bean Aì˜ ì´ˆê¸°í™” ì‹œì ì— Proxy Bean Bë¥¼ ì£¼ì…í•˜ì—¬ ì´ˆê¸°í™”ë¥¼ ë¯¸ë£¨ê³ , ì‹¤ì œë¡œ Bean Aê°€ ì‚¬ìš©ë  ë•Œ Bean Bë¥¼ ì£¼ì…í•˜ëŠ” ë°©ì‹ì´ë‹¤.
  * ìŠ¤í”„ë§ì—ì„œ ê¶Œì¥í•˜ì§€ ì•ŠëŠ” ë°©ì‹ì´ë‹¤.

* Setter ì£¼ì…, Field ì£¼ì…
  * ìˆœí™˜ ì°¸ì¡°ë¥¼ íšŒí”¼í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë‚˜ ìš”ì¦˜ì—ëŠ” ìƒì„±ì ì£¼ì…ì„ ê¶Œì¥í•˜ë¯€ë¡œ, ì˜ ì•ˆì“°ì´ëŠ” ë°©ë²•ì´ë‹¤.
  * ìƒì„±ì ì£¼ì…ì€ ìˆœí™˜ ì°¸ì¡°ê°€ ì¼ì–´ë‚¬ì„ ê²½ìš° ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¤ë©´ì„œ Springì´ êµ¬ë™ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ìˆœí™˜ ì°¸ì¡°ì— ëŒ€í•œ ì˜ˆë°©ì´ ê°€ëŠ¥í•˜ë‹¤.

* ìˆœí™˜ ì°¸ì¡° ì—ëŸ¬ í•´ê²° ë°©ë²•ì´ ì—¬ëŸ¬ê°œ ìˆì§€ë§Œ, ìˆœí™˜ ì°¸ì¡°ê°€ ì•ˆ ì¼ì–´ë‚˜ë„ë¡ ì„¤ê³„í•˜ëŠ” ê²ƒì´ ì¢‹ì€ ë””ìì¸ì´ë‹¤.
# DAO (Data Access Object)

> ì‹¤ì œë¡œ DBì— ì ‘ê·¼í•˜ëŠ” ê°ì²´

- DBì˜ Dataë¥¼ CRUDí•˜ëŠ” ê³„ì¸µ (Persistence Layer)
    - Persistence Layer : Databaseì— Dataë¥¼ CRUD í•˜ëŠ” ê³„ì¸µ
- Serviceì™€ DBë¥¼ ì—°ê²°í•˜ëŠ” ê³ ë¦¬ ì—­í•  < Service - DAO - DB >

DAOë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” `íš¨ìœ¨ì ì¸ ì»¤ë„¥ì…˜ ê´€ë¦¬`ì™€ `ë³´ì•ˆì„±` ë•Œë¬¸

- ì €ìˆ˜ì¤€ ë°ì´í„° ë¡œì§ê³¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ë¶„ë¦¬ (ë³´ì•ˆ)
- DAOëŠ” ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê±°ë‚˜ ì¡°ì‘í•˜ëŠ” ê¸°ëŠ¥ì„ ì „ë‹´í•˜ë„ë¡ ë§Œë“  ê°ì²´!! (ë¹„ìš© ì ˆê°)
    - ì»¨íŠ¸ë¡¤ëŸ¬ë‚˜ ì„œë¹„ìŠ¤ëŠ” í•„ìš”í•  ë•Œ ì´ë¯¸ ì—°ê²°ëœ DAOë¥¼ í†µí•´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì„œ DB ì ‘ê·¼
    - ì¦ì€ DB ì ‘ê·¼ì˜ ë†’ì€ ì˜¤ë²„í—¤ë“œ ë¹„ìš©

        ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ HTTP ìš”ì²­ì— ë”°ë¼ Threadë¥¼ ìƒì„±í•˜ê²Œ ë˜ê³  ëŒ€ë¶€ë¶„ì˜ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì€ DB ì„œë²„ë¡œ ë¶€í„° ë°ì´í„°ë¥¼ ì–»ê²Œ ëœë‹¤. ë§Œì•½ ìœ„ì™€ ê°™ì´ ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ DBì ‘ì†ì„ ìœ„í•œ Driverë¥¼ ë¡œë“œí•˜ê³  Connection ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ì—°ê²°í•œë‹¤ë©´ ë¬¼ë¦¬ì ìœ¼ë¡œ DB ì„œë²„ì— ì§€ì†ì ìœ¼ë¡œ ì ‘ê·¼í•´ì•¼ í•œë‹¤.

        ì´ëŸ¬í•œ ìƒí™©ì—ì„œ DB Connection ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë¶€ë¶„ì— ëŒ€í•œ ë¹„ìš©ê³¼ ëŒ€ê¸° ì‹œê°„ì„ ì¤„ì´ê³ , ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì— ëŒ€í•œ ë¶€ë‹´ì„ ì¤„ì¼ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆëŠ”ë° ë°”ë¡œ, DBCP(Database Connection Pool)ë¥¼ ì´ìš©í•˜ë©´ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ê°€ ìˆë‹¤.

        - DBCPë¥¼ ì´ìš©í•œ íš¨ìœ¨ ê·¹ëŒ€í™”
            1. WASê°€ ì‹¤í–‰ë˜ë©´ì„œ ë¯¸ë¦¬ ì¼ì •ëŸ‰ì˜ DB Connection ê°ì²´ë¥¼ ìƒì„±í•˜ê³ Â `Pool`Â ì´ë¼ëŠ” ê³µê°„ì— ì €ì¥í•´ ë‘”ë‹¤.
            2. HTTP ìš”ì²­ì— ë”°ë¼ í•„ìš”í•  ë•Œ Poolì—ì„œ Connection ê°ì²´ë¥¼ ê°€ì ¸ë‹¤ ì“°ê³  ë°˜í™˜í•œë‹¤.
            3. ì´ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ HTTP ìš”ì²­ ë§ˆë‹¤ DB Driverë¥¼ ë¡œë“œí•˜ê³  ë¬¼ë¦¬ì ì¸ ì—°ê²°ì— ì˜í•œ Connection ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë¹„ìš©ì´ ì¤„ì–´ë“¤ê²Œ ëœë‹¤.

                ![README%20821c5d15f5d34e5595b97335f970fd5b/lnoci043.gif](yunhwan/IMG/lnoci043.gif)

ì‚¬ìš©ìëŠ” Interfaceë¥¼ DAOì— ì œì‹œí•˜ê³  ì´ Interfaceë¥¼ êµ¬í˜„í•œ êµ¬í˜„ì²´ëŠ” ì‚¬ìš©ìì—ê²Œ ìì›ì„ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë°˜í™˜í•œë‹¤. (ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬í˜„í•˜ë©´ í™•ì¥ì„±ê³¼ ìœ ì—°ì„±ì´ ì¢‹ì•„ì§„ë‹¤.)

â†’ ë‹¤ìˆ˜ì˜ DB ì ‘ê·¼ DAOê°€ ë‹´ë‹¹í•´ ì˜¤ë²„í—¤ë“œë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤.

# DTO

> ê° ê³„ì¸µ ê°„ ë°ì´í„° êµí™˜ì„ ìœ„í•œ ê°ì²´ (ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ” í¬ë§·)

ì–´ë–¤ ë°ì´í„°ë¥¼ DB â†’ ì„œë¹„ìŠ¤ â†’ ì»¨íŠ¸ë¡¤ëŸ¬ â†’ ì‚¬ìš©ì ë¡œ ë³´ë‚´ê±°ë‚˜
ë°˜ëŒ€ë¡œ ì‚¬ìš©ì â†’ ì»¨íŠ¸ë¡¤ëŸ¬ â†’ ì„œë¹„ìŠ¤ â†’ DBë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê°ì²´ë¥¼ ë§í•œë‹¤. (ê³„ì¸µ ê°„

- DTOëŠ” ë”°ë¡œ ë¡œì§ì„ ê°€ì§€ê³  ìˆì§€ì•Šìœ¼ë©° í•„ë“œê°’ì— ì ‘ê·¼í•˜ê¸°ìœ„í•œ getter, setterë§Œì„ ê°€ì§€ëŠ” í´ë˜ìŠ¤ì´ë‹¤.
    ![README%20821c5d15f5d34e5595b97335f970fd5b/_2021-01-08__12.20.55.png](yunhwan/IMG/_2021-01-08__12.20.55.png)

- ë°ì´í„°ë² ì´ìŠ¤ì— ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ë„£ê±°ë‚˜ ìˆ˜ì •í•  ê²½ìš° ë˜ëŠ” íŠ¹ì • ê°’ì„ ì¡°íšŒí•´ì•¼í•  ê²½ìš°
ìš°ë¦¬ëŠ” ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì§€ì •í•´ì•¼í•˜ê³  ê·¸ëŸ¬ë ¤ë©´ ê°’ì„ ë°›ì•„ì™€ì•¼ í•œë‹¤.
    - ì–´ë–¤ ì‘ì—…ì„ í•˜ê¸° ìœ„í•´ í•„ìš”í•œ í•„ìˆ˜ ìš”êµ¬ ì‚¬í•­ì„ DTOë¼ê³  í•˜ë©´ ë ê²ƒ ê°™ë‹¤.
- í´ë¼ì´ì–¸íŠ¸ê°€ ì»¨íŠ¸ë¡¤ëŸ¬ì— ìš”ì²­í–ˆì„ ë•Œ `ìš”ì²­í•  ì–‘ì‹`, `ëŒë ¤ ë°›ì„ ì–‘ì‹`ì„ ì •ì˜í•´ì£¼ëŠ” ê²ƒ â‡’ ***DTO***

# Entity Class

> ì‹¤ì œ DBì˜ í…Œì´ë¸”ê³¼ ë§¤ì¹­ë  í´ë˜ìŠ¤

- ìµœëŒ€í•œ ì™¸ë¶€ì—ì„œ getterë¡œ í´ë˜ìŠ¤ ë‚´ ê°’ì„ ì ‘ê·¼í•˜ì§€ ì•Šë„ë¡ í•„ìš”í•œ ë¡œì§ì„ ë©”ì„œë“œë¡œ êµ¬í˜„
- ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ë˜, Domain Logicë§Œ ê°€ì§€ê³  ìˆì–´ì•¼í•˜ë©° Presentation Logicì„ ê°€ì ¸ì„œ ì•ˆë¨
- `@Entity`, `@Column`, `@Id` ë“±ì˜ ì–´ë…¸í…Œì´ì…˜ ì´ìš©

### Entity í´ë˜ìŠ¤ì™€ DTO í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•˜ëŠ” ì´ìœ 

- View Layerì™€ DB Layerì˜ ì—­í• ì„ ë¶„ë¦¬í•˜ê¸°ìœ„í•´ì„œ
- í…Œì´ë¸”ê³¼ ë§¤í•‘ë˜ëŠ” Entityí´ë˜ìŠ¤ëŠ” ë³€ê²½ ì‹œ ì—¬ëŸ¬ í´ë˜ìŠ¤ì— ì˜í–¥ì„ ì¤€ë‹¤.
DTO í´ë˜ìŠ¤ëŠ” ìì£¼ ë³€ê²½ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë‘ ê°œë¥¼ ë¶„ë¦¬ ì‹œí‚¨ë‹¤.

## ì „ì²´ êµ¬ì¡°

![README%20821c5d15f5d34e5595b97335f970fd5b/spring-package-flow.png](yunhwan/IMG/spring-package-flow.png)

# Spring MVC ìš”ì²­ ì²˜ë¦¬ê³¼ì • ì •ë¦¬

> ìŠ¤í¬ë¡¤ ì••ë°• ì£¼ì˜!

ì²˜ìŒì—” view resolverì™€ message converterê°€ ì–¸ì œ ì‹¤í–‰ë˜ëŠ”ì§€ë¥¼ ì•Œê¸°ìœ„í•´ ê²€ìƒ‰ì„ ì‹œì‘í–ˆì§€ë§Œ ì´ì™• í•˜ëŠ” ê¹€ì— requestë¶€í„° response ê¹Œì§€ ì „ì²´ ê³¼ì •ì„ ì•Œì•„ ë³´ë„ë¡í•˜ì.

### ğŸ”¸ê°„ëµí•œ ìš”ì•½

* í˜ì´ì§€ë¥¼ ë¦¬í„´í•˜ëŠ” ê²½ìš°
![image](https://user-images.githubusercontent.com/46257667/104042542-fd2c4c00-521d-11eb-8a9a-64246282d6c3.png)

âœ” controllerê°€ ë·° ì´ë¦„ì„ ë¦¬í„´í•˜ê³  view resolverê°€ í•´ë‹¹ ë·°ë¥¼ ì°¾ì•„ ì‘ë‹µí•˜ëŠ” í˜•íƒœ ex) text/html
* @Responsebody ì‚¬ìš©í•˜ëŠ” ê²½ìš° (@RestController ì‚¬ìš© í¬í•¨)
![image](https://user-images.githubusercontent.com/46257667/104042598-0ae1d180-521e-11eb-9497-a8343b9b16d1.png)

âœ” message converterì— ì˜í•´ ë°ì´í„° íƒ€ì…ì— ë”°ë¼ ë³€í™˜ì´ ì´ë¤„ì§„ í›„ HTTP response bodyì— ì§ì ‘ ì“°ì—¬ì§„ë‹¤.

### ğŸ”¸ë” ê¹Šì´

ğŸ“– [Servletì— ëŒ€í•´ ì•Œì•„ë³´ì](https://jeong-pro.tistory.com/222)

![image](https://user-images.githubusercontent.com/46257667/104090556-d7a15000-52ba-11eb-9ebb-06e5280436f2.png)

![image](https://user-images.githubusercontent.com/46257667/104090579-03243a80-52bb-11eb-8336-e8c9c3ab5a88.png)

doDispatch()ì—ì„œ ì¼ì–´ë‚˜ëŠ” ì²« ì‘ì—…ì€ í•´ë‹¹ ìš”ì²­ì— ëŒ€í•œ í•¸ë“¤ëŸ¬ì™€ ì¸í„°ì…‰í„°ë¥¼ ì°¾ì•„ë‚´ëŠ” ê²ƒ. í•¸ë“¤ëŸ¬ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ìš”ì²­ urlì— í•´ë‹¹í•˜ëŠ” ë©”ì†Œë“œì´ë‹¤. í•¸ë“¤ëŸ¬ì™€ ì¸í„°ì…‰í„°ë“¤ì´ ëª¨ì—¬ HandlerExecutionChainì´ë¼ëŠ” ê°ì²´ì— ë‹´ê¸´ë‹¤.

![image](https://user-images.githubusercontent.com/46257667/104090587-12a38380-52bb-11eb-9d48-2d22b8bdd909.png)


![image](https://user-images.githubusercontent.com/46257667/104090904-39fb5000-52bd-11eb-8a4d-ae5a3f5f5cfa.png)

ìŠ¤í”„ë§ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì—¬ëŸ¬ í•¸ë“¤ëŸ¬ì–´ëŒ‘í„°ë¥¼ supprot() ë©”ì†Œë“œë¡œ ì°¾ëŠ” ê³¼ì •ì´ë‹¤. 

![image](https://user-images.githubusercontent.com/46257667/104091050-46cc7380-52be-11eb-8429-7ee845875e96.png)

í•´ë‹¹ URLì— ë§¤í•‘ëœ ì¸í„°ì…‰í„°ë“¤ì˜ preHandler()ë¥¼ ì‹¤í–‰í•˜ëŠ” ëª¨ìŠµ.

â— ì£¼ì˜ : tomcatì€ Requestì˜ bodyë¥¼ í•œë²ˆë§Œ ì½ì„ ìˆ˜ ìˆë„ë¡ ì œí•œí•´ ë†“ì•˜ë‹¤. ì¸í„°ì…‰í„° preHandlerê°€ ì‹¤í–‰ë˜ëŠ” ì™€ì¤‘ì— Request bodyë¥¼ ì½ì„ ê²½ìš° ë’¤ì—ì„œ bodyì˜ ê°’ì„ ì½ì§€ ëª»í•´ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ Request bodyë¥¼ ì¬ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½í•´ì•¼ í•œë‹¤.

![image](https://user-images.githubusercontent.com/46257667/104091072-5ba90700-52be-11eb-82cb-1c1af4b356c3.png)

ì¸í„°ì…‰í„° í•¸ë“¤ë§ì´ ëë‚˜ë©´ ë³¸ê²©ì ìœ¼ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ í•¸ë“¤ëŸ¬ì˜ íŒŒë¼ë¯¸í„°ë“¤ì— ìš”ì²­ ë°ì´í„°ë¥¼ ë°”ì¸ë”©í•˜ëŠ” ì‘ì—…ì´ ì´ë£¨ì–´ì§„ë‹¤.

![image](https://user-images.githubusercontent.com/46257667/104091132-bb9fad80-52be-11eb-9faf-eb2dc9c274f9.png)

ìì„¸íˆ ë³´ë©´, êµ¬í˜„ ë° ì˜¤ë²„ë¼ì´ë“œë¥¼ í†µí•´ ìì—°ìŠ¤ëŸ½ê²Œ íƒ€ì…ì— ë”°ë¥¸ ì²˜ë¦¬ê°€ ì´ë£¨ì–´ì§ì„ ë³¼ ìˆ˜ ìˆë‹¤. ì˜ˆì‹œì—ì„œ @RequestMappingì„ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì— RequestMappingHandlerAdapterê°€ ì‚¬ìš©ë˜ì—ˆë‹¤.

![image](https://user-images.githubusercontent.com/46257667/104092217-d6295500-52c5-11eb-899a-748127390f08.png)

ì—¬ê¸°ì„œë„ @RequestBodyê°€ ì‚¬ìš©ë˜ì—ˆê¸° ë•Œë¬¸ì— ArgumentResolver(ì¸ì ë°ì´í„° ë°”ì¸ë”© ì‘ì—…)ì— RequestResponseBodyMethodProcessor.classê°€ ì‚¬ìš©ë˜ì—ˆë‹¤.

![image](https://user-images.githubusercontent.com/46257667/104092264-243e5880-52c6-11eb-83bf-81449402b311.png)

ë©”ì†Œë“œ íŒŒë¼ë¯¸í„°ë³„ë¡œ forë¬¸ì´ ëŒë©´ì„œ ì‹¤í–‰ì´ë˜ê³  ì¸ì íƒ€ì…ì´ ë‹¤ë¥´ë¯€ë¡œ ê°ê° ë‹¤ë¥¸ ArgumentResolverê°€ ì“°ì¸ë‹¤.

![image](https://user-images.githubusercontent.com/46257667/104092375-e4c43c00-52c6-11eb-881e-45b48409f040.png)

@RequestBodyë¥¼ ì“´ String paramsì˜ ê²½ìš° RequestResponseBodyMethodProcessorì˜ resolveArgumentë¥¼ íƒ€ê²Œ ëœë‹¤. 
![image](https://user-images.githubusercontent.com/46257667/104092384-f4dc1b80-52c6-11eb-835f-7854503feb1b.png)

![image](https://user-images.githubusercontent.com/46257667/104092392-ff96b080-52c6-11eb-91ed-4c7ccfe09a93.png)

ì´ì œ RequestBodyì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì†Œë“œ(í•¸ë“¤ëŸ¬)ì˜ íŒŒë¼ë¯¸í„°ì— ë°”ì¸ë”©í•˜ê¸° ìœ„í•œ ì‘ì—…ì„ ì§„í–‰í•˜ê²Œ ëœë‹¤.

![image](https://user-images.githubusercontent.com/46257667/104092408-189f6180-52c7-11eb-9891-c4a4bcccc947.png)

ì´ì²˜ëŸ¼ resolveArgumentì—ì„œëŠ” ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ í†µí•´ Requestì—ì„œ ë°ì´í„°ë¥¼ ë½‘ì•„ë‚´ê²Œ í•œë‹¤.

![image](https://user-images.githubusercontent.com/46257667/104092413-2654e700-52c7-11eb-9e4f-9c1dedd82ed5.png)


![image](https://user-images.githubusercontent.com/46257667/104092422-32d93f80-52c7-11eb-8edc-32a7d063c86e.png)

![image](https://user-images.githubusercontent.com/46257667/104092437-4f757780-52c7-11eb-9c35-9edaedd4b477.png)

ë¨¼ì € getBodyë¥¼ í†µí•´ì„œ requestBodyë¥¼ ì½ê²Œë˜ê³  HttpMessageConverter.read()ë¥¼ í†µí•´ í•´ë‹¹ ë©”ì‹œì§€ ì»¨ë²„íŒ…ì„ í•˜ê²Œ ëœë‹¤.

![image](https://user-images.githubusercontent.com/46257667/104092444-59977600-52c7-11eb-85c5-80090dec05c7.png)

ë§Œì•½ Form POSTì— í•´ë‹¹ë˜ëŠ” ê²½ìš°ë¼ë©´ requestì—ì„œ ì½ì–´ë“¤ì¸ body ë‚´ìš©ì„ ë‹¤ì‹œ UTF-8 & UrlEncodingí•˜ì—¬ ByteArrayInputStreamìœ¼ë¡œ ë¦¬í„´í•˜ê³  ìˆë‹¤. ì—¬ê¸°ì„œ ë¦¬í„´ëœ ByteArrayInputStreamì´ RequestBodyë¡œ ì‚¬ìš©ë˜ëŠ” ê²ƒì´ê³ , ì¬ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ê²Œë” í•˜ëŠ” ê²ƒì´ë‹¤.

ë°˜ë©´ Request content-typeì´ application/jsonì¸ ê²½ìš° Form POSTê°€ ì•„ë‹ˆë¯€ë¡œ ìœ„ì˜ ê³¼ì •ì„ ê±°ì¹˜ì§€ ì•Šê²Œ ë˜ë©°, RequestBodyì— ëŒ€í•œ ì¬ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ê²Œë” ë”°ë¡œ ì²˜ë¦¬í•´ì£¼ëŠ” ë¶€ë¶„ì´ ì—†ê²Œ ëœë‹¤.

![image](https://user-images.githubusercontent.com/46257667/104092457-7633ae00-52c7-11eb-8262-dc417ffd5a4d.png)

bodyì—ì„œ ì½ì–´ë“¤ì¸ ë°ì´í„°ë¥¼ ì ì ˆí•œ ë©”ì‹œì§€ ì»¨ë²„í„°ë¡œ ì½ì„ ì°¨ë¡€ì´ë‹¤. ì´ íë¦„ì€ @RequestBodyë¥¼ ì‚¬ìš©í•œ ê²½ìš°ì—ë§Œ ì§„ì…í•˜ê²Œ ë˜ë©°, Request Content-typeì´ jsonì¸ì§€ xmlì¸ì§€ formì¸ì§€ì™€ ë©”ì†Œë“œ í•¸ë“¤ëŸ¬ì˜ íŒŒë¼ë¯¸í„° íƒ€ì…ì— ë”°ë¼ ìë™ìœ¼ë¡œ ë©”ì„¸ì§€ ì»¨ë²„í„°ê°€ ê²°ì •ëœë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— JSON, XML ë°ì´í„°ë¥¼ ì •ìƒì ìœ¼ë¡œ ì½ì–´ë“¤ì´ê¸° ìœ„í•´ì„œëŠ” ë¬´ì¡°ê±´ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì†Œë“œì—ì„œ @RequestBodyë¥¼ ë¶™ì—¬ì•¼ í•œë‹¤.

![image](https://user-images.githubusercontent.com/46257667/104092466-8055ac80-52c7-11eb-9b06-61195363b33e.png)

ì ì ˆí•œ ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ ì°¾ì•„ ì²˜ë¦¬í•˜ëŠ” ê³¼ì •

![image](https://user-images.githubusercontent.com/46257667/104092476-8a77ab00-52c7-11eb-8784-53615e399e5c.png)

text/plainì¸ ê²½ìš° StringHttpMessageConverterê°€ ì‹¤í–‰ë˜ê³ , application/jsonì¸ ê²½ìš° MappingJackson2HttpMessageConverterê°€ ì‹¤í–‰ëœë‹¤. Form POST ë°©ì‹ì€ text/plainìœ¼ë¡œ ì²˜ë¦¬ëœë‹¤.

![image](https://user-images.githubusercontent.com/46257667/104092481-96fc0380-52c7-11eb-86c4-f746e0fe1df8.png)

ì‘ë‹µ ê²°ê³¼ë¡œ í˜ì´ì§€ ì´ë™ì„ í•˜ê²Œ ë  ê²½ìš° ì´ë™í•˜ê²Œë  í˜ì´ì§€ urlê³¼ í˜ì´ì§€ì— í‘œì‹œë  ë°ì´í„° 2ê°€ì§€ë¥¼ ë“¤ê³  ë¦¬í„´í•˜ê²Œ ëœë‹¤. ìŠ¤í”„ë§ì—ì„œëŠ” ì´ë¥¼ ModelAndViewì— ë‹´ê²Œ ë˜ê³  Modelì—ëŠ” ë°ì´í„°ë¥¼ Viewì—ëŠ” í˜ì´ì§€ ì£¼ì†Œë¥¼ ë‹´ê²Œ ëœë‹¤.

![image](https://user-images.githubusercontent.com/46257667/104092486-a0856b80-52c7-11eb-81c9-7bec39c41fe2.png)

í˜ì´ì§€ ì´ë™ì´ ì•„ë‹Œ ê²½ìš° @ResponseBodyë¥¼ ë¶™ì—¬ JSONì´ë‚˜ XML ë°ì´í„°ë¥¼ ë¦¬í„´í•˜ê²Œ ëœë‹¤ë©´ ì ì ˆí•œ ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ ì“°ì—¬ HTTP response bodyì— ì§ì ‘ ë°ì´í„°ê°€ ì“°ì—¬ì§„ë‹¤.

--- 
# AOP

- AOPëŠ” Aspect Oriented Programmingì˜ ì•½ìë¡œ ê´€ì  ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì´ë¼ê³  ë¶ˆë¦°ë‹¤. ê´€ì  ì§€í–¥ì€ ì‰½ê²Œ ë§í•´ ì–´ë–¤ ë¡œì§ì„ ê¸°ì¤€ìœ¼ë¡œ í•µì‹¬ì ì¸ ê´€ì , ë¶€ê°€ì ì¸ ê´€ì ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì„œ ë³´ê³  ê·¸ ê´€ì ì„ ê¸°ì¤€ìœ¼ë¡œ ê°ê° ëª¨ë“ˆí™”í•˜ê² ë‹¤ëŠ” ê²ƒì´ë‹¤. ì—¬ê¸°ì„œ ëª¨ë“ˆí™”ë€ ì–´ë–¤ ê³µí†µëœ ë¡œì§ì´ë‚˜ ê¸°ëŠ¥ì„ í•˜ë‚˜ì˜ ë‹¨ìœ„ë¡œ ë¬¶ëŠ” ê²ƒì„ ë§í•œë‹¤.

![aop2](https://user-images.githubusercontent.com/51367515/104126784-da2aa500-53a1-11eb-85a6-69fea1c4fd5d.png)

- ì‚¬ìš© ë˜ëŠ” ê³³ : ë³´ì•„ ì¸ì¦, íŠ¸ëœì­ì…˜ ì²˜ë¦¬, ë¡œê¹…

- ê¸°ëŠ¥ì„ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°ëŠ¥ê³¼ ê³µí†µê¸°ëŠ¥ìœ¼ë¡œ 'êµ¬ë¶„â€™í•˜ê³ ,ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ë“¤ì–´ê°€ëŠ” ê³µí†µê¸°ëŠ¥ì˜ ì½”ë“œë¥¼ ê°œë°œìì˜ ì½”ë“œ ë°–ì—ì„œ í•„ìš”í•œ ì‹œì ì— ì ìš©í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ë°©ì‹


## :smile: ìš©ì–´ ì„¤ëª…
- ë¡œê¹…, ì˜ˆì™¸, íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ê°™ì€ ì½”ë“œë“¤ì€ íš¡ë‹¨ ê´€ì‹¬(Crosscutting Concerns)
- í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ í•µì‹¬ ê´€ì‹¬(Core Concerns)
- ì¡°ì¸í¬ì¸íŠ¸(Joinpoint): í´ë¼ì´ì–¸íŠ¸ê°€ í˜¸ì¶œí•˜ëŠ” ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì†Œë“œ, ì¡°ì¸í¬ì¸íŠ¸ ì¤‘ì—ì„œ í¬ì¸íŠ¸ì»·ì´ ë˜ê¸° ë•Œë¬¸ì— í¬ì¸íŠ¸ì»·ì˜ í›„ë³´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- í¬ì¸íŠ¸ì»·(Pointcut): íŠ¹ì • ì¡°ê±´ì— ì˜í•´ í•„í„°ë§ ëœ ì¡°ì¸í¬ì¸íŠ¸, ìˆ˜ë§ì€ ì¡°ì¸í¬ì¸íŠ¸ ì¤‘ì— íŠ¹ì • ë©”ì†Œë“œì—ì„œë§Œ ê³µí†µê¸°ëŠ¥ì„ ìˆ˜í–‰ì‹œí‚¤ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.

- ì–´ë“œë°”ì´ìŠ¤(Advice): ê³µí†µê¸°ëŠ¥ì˜ ì½”ë“œ, ë…ë¦½ëœ í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œë¡œ ì‘ì„±í•©ë‹ˆë‹¤.

- ìœ„ë¹™(Weaving): í¬ì¸íŠ¸ì»·ìœ¼ë¡œ ì§€ì •í•œ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ê°€ì§„ ë©”ì†Œë“œê°€ í˜¸ì¶œë  ë•Œ, ì–´ë“œë°”ì´ìŠ¤ì— í•´ë‹¹í•˜ëŠ” ê³µí†µê¸°ëŠ¥ì˜ ë©”ì†Œë“œê°€ ì‚½ì…ë˜ëŠ” ê³¼ì •ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ìœ„ë¹™ì„ í†µí•´ì„œ ê³µí†µê¸°ëŠ¥ê³¼ í•µì‹¬ ê¸°ëŠ¥ì„ ê°€ì§„ ìƒˆë¡œìš´ í”„ë¡ì‹œë¥¼ ìƒì„±í•˜ê²Œ ë©ë‹ˆë‹¤.

- Aspect: í¬ì¸íŠ¸ì»·ê³¼ ì–´ë“œë°”ì´ìŠ¤ì˜ ê²°í•©ì…ë‹ˆë‹¤. ì–´ë–¤ í¬ì¸íŠ¸ì»· ë©”ì†Œë“œì— ëŒ€í•´ ì–´ë–¤ ì–´ë“œë°”ì´ìŠ¤ ë©”ì†Œë“œë¥¼ ì‹¤í–‰í• ì§€ ê²°ì •í•©ë‹ˆë‹¤.

![aop2](https://user-images.githubusercontent.com/51367515/104126784-da2aa500-53a1-11eb-85a6-69fea1c4fd5d.png)

# :smile: Proxy
![í”„ë¡ì‹œ](https://user-images.githubusercontent.com/51367515/104176424-8e800600-544a-11eb-9f45-b21f65502efb.PNG)

- í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©í•˜ë ¤ê³  í•˜ëŠ” ì‹¤ì œ ëŒ€ìƒì¸ ê²ƒì²˜ëŸ¼ ìœ„ì¥í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ë°›ì•„ì£¼ì–´ ì²˜ë¦¬í•˜ëŠ” ëŒ€ë¦¬ì ì—­í• .

- í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ  : ì£¼ ì—…ë¬´ ì½”ë“œëŠ” ë³´ì¡° ì—…ë¬´ê°€ í•„ìš”í•œ ê²½ìš°, í•´ë‹¹ Proxy ë§Œ ì¶”ê°€í•˜ë©´ ë˜ê³ , í•„ìš”ì—†ê²Œ ë˜ë©´ Proxyë¥¼ ì œê±°í•˜ë©´ ë¨. ë³´ì¡° ì—…ë¬´ì˜ íƒˆ ë¶€ì°©ì´ ì‰¬ì›Œì§€ê³ , ê·¸ë¦¬í•˜ì—¬ ì£¼ ì—…ë¬´ ì½”ë“œëŠ” ë³´ì¡° ì—…ë¬´ ì½”ë“œì˜ ë³€ê²½ìœ¼ë¡œ ì¸í•´ì„œ ë°œìƒí•˜ëŠ” ì½”ë“œ ìˆ˜ì • ì‘ì—…ì´ í•„ìš” ì—†ê²Œ ë¨. ì´ëŠ” OCP ë²•ì¹™ì— í•´ë‹¹ë¨.

# OCP (Open-Close Principal : ê°œë°© íì‡„ì˜ ì›ì¹™)

ê°œë°©-íì‡„ ì›ì¹™(OCP, Open-Closed Principle)ì€ 'ì†Œí”„íŠ¸ì›¨ì–´ ê°œì²´(í´ë˜ìŠ¤, ëª¨ë“ˆ, í•¨ìˆ˜ ë“±ë“±)ëŠ” í™•ì¥ì— ëŒ€í•´ ì—´ë ¤ ìˆì–´ì•¼ í•˜ê³ , ìˆ˜ì •ì— ëŒ€í•´ì„œëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤.'ëŠ” í”„ë¡œê·¸ë˜ë° ì›ì¹™ì´ë‹¤.

```java
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Component;
import org.springframework.util.StopWatch;

@Aspect
@Component
public class LogAspect {

    private static Logger logger = LoggerFactory.getLogger(LogAspect.class);

    //ProceedingJoinPoint í´ë˜ìŠ¤ëŠ” JoinPoint ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†í•˜ëŠ” ì¸í„°í˜ì´ì„œ.. ì¸ìëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ë„˜ê²¨ì¤€ë‹¤.
    @Around("execution(* com.jun.demo.controller.HelloController.*(..))") //í¬ì¸íŠ¸ì»·
    public Object logging(ProceedingJoinPoint pjp) throws Throwable{

        StopWatch stopWatch = new StopWatch();
        
        stopWatch.start();
        logger.info("start -" + pjp.getSignature().getDeclaringTypeName() + " / " + pjp.getSignature().getName());
        Object result = pjp.proceed();
        logger.info("finished -" + pjp.getSignature().getDeclaringTypeName() + " / " + pjp.getSignature().getName());

        stopWatch.stop();
        logger.info("Timer Stop - Elapsed time :" + stopWatch.getTotalTimeMillis());

        return result;
    }
}
```

